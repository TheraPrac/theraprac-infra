# =============================================================================
# Ziti Router Configuration
# =============================================================================
# Managed by Ansible - DO NOT EDIT MANUALLY
# Note: Identity fields are populated after enrollment
# =============================================================================

v: 3

# Router identity (populated by enrollment)
identity:
  cert: {{ ziti_router_dir }}/{{ ziti_router_name }}.cert
  server_cert: {{ ziti_router_dir }}/{{ ziti_router_name }}.server.cert
  key: {{ ziti_router_dir }}/{{ ziti_router_name }}.key
  ca: {{ ziti_pki_dir }}/{{ ziti_pki_ca_name }}/certs/{{ ziti_pki_ca_name }}.cert

# Connection to controller
ctrl:
  endpoint: tls:127.0.0.1:6262

# Link dialer for router-to-router communication
link:
  dialers:
    - binding: transport

# Listeners
listeners:
  # Edge listener for SDK connections
  - binding: edge
    address: tls:0.0.0.0:{{ ziti_router_edge_port }}
    options:
      advertise: {{ ziti_public_endpoint }}:{{ ziti_router_edge_port }}
      connectTimeoutMs: 5000
      getSessionTimeout: 60s

  # Tunnel binding for hosting services
  - binding: tunnel
    options:
      mode: host

# Forwarder configuration
forwarder:
  latencyProbeInterval: 10s
  xgressDialQueueLength: 1000
  xgressDialWorkerCount: 128
  linkDialQueueLength: 1000
  linkDialWorkerCount: 32

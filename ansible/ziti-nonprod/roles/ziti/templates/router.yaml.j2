# =============================================================================
# Ziti Router Configuration
# =============================================================================
# Generated by Ansible - DO NOT EDIT MANUALLY
# Template: roles/ziti/templates/router.yaml.j2
#
# Note: This is a TEMPLATE config. The actual identity certs are populated
# during router enrollment.
# =============================================================================

v: 3

# Router identity (populated after enrollment)
identity:
  cert: {{ ziti_home }}/router/router.cert
  server_cert: {{ ziti_home }}/router/router.cert
  key: {{ ziti_home }}/router/router.key
  ca: {{ ziti_pki_dir }}/root-ca/certs/root-ca.cert

# Connection to controller
ctrl:
  endpoint: tls:{{ ziti_controller_internal_addr }}

# Link configuration (router-to-router)
link:
  dialers:
    - binding: transport

# Listeners
listeners:
  # Edge listener for SDK clients
  - binding: edge
    address: tls:0.0.0.0:{{ ziti_router_port }}
    options:
      advertise: {{ ziti_domain }}:{{ ziti_router_port }}

  # Tunnel listener (for hosting services)
  - binding: tunnel
    options:
      mode: host

# Forwarder configuration
forwarder:
  latencyProbeInterval: 10s

# TODO: Add csr section if using external CA
# TODO: Consider adding metrics/events configuration

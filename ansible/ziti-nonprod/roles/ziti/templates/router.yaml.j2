# =============================================================================
# Ziti Router Configuration
# =============================================================================
# Generated by Ansible for {{ environment }}
# =============================================================================

v: 3

identity:
  cert: {{ ziti_home }}/router/router.cert
  server_cert: {{ ziti_home }}/router/router.cert
  key: {{ ziti_home }}/router/router.key
  ca: {{ ziti_home }}/pki/ca-bundle.cert

ctrl:
  endpoint: tls:127.0.0.1:6262

link:
  dialers:
    - binding: transport

listeners:
  - binding: edge
    address: tls:0.0.0.0:{{ ziti_router_port }}
    options:
      advertise: {{ ziti_domain }}:{{ ziti_router_port }}
      connectTimeoutMs: 5000
      getSessionTimeout: 60s

  - binding: tunnel
    options:
      mode: host

edge:
  csr:
    country: US
    province: UT
    locality: Salt Lake City
    organization: TheraPrac
    organizationalUnit: {{ environment }}
    sans:
      dns:
        - {{ ziti_domain }}
        - localhost
      ip:
        - 127.0.0.1

forwarder:
  latencyProbeInterval: 10s
  xgressDialQueueLength: 1000
  xgressDialWorkerCount: 128
  linkDialQueueLength: 1000
  linkDialWorkerCount: 32

